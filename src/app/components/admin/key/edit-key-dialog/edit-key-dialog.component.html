<mat-tab-group>
  <mat-tab label="Osnovne informacije">
    <div>
      <app-form-input [model]="data.name" [config]="nameInputConfig" [group]="keyForm"></app-form-input>
      <app-form-input [model]="data.amount" [config]="amountInputConfig" [group]="keyForm"></app-form-input>
      <app-form-input [model]="data.code" [config]="codeInputConfig" [group]="keyForm"></app-form-input>
      <app-form-select [model]="data.idCurrentPrice" bindValue="price" [config]="idCurrentPriceSelectConfig"
                       [group]="keyForm"></app-form-select>
      <div [formGroup]="keyForm">
        <mat-form-field appearance="outline">
          <mat-label>Kategorija/Potkategorija ključa</mat-label>
          <mat-select formControlName="idKeySubCategory">
            <mat-option>-- None --</mat-option>
            <mat-optgroup *ngFor="let group of listOfKeyCategories" [label]="group.name">
              <mat-option *ngFor="let keySubCategory of group.keySubCategories" [value]="keySubCategory">
                {{keySubCategory.name}}
              </mat-option>
            </mat-optgroup>
          </mat-select>
        </mat-form-field>
      </div>
      <div [formGroup]="keyForm">
        <mat-form-field appearance="outline">
          <mat-label>Brand/Model automobila</mat-label>
          <mat-select formControlName="idCarModel" [ngModel]="data.idCarModel">
            <mat-option>-- None --</mat-option>
            <mat-optgroup *ngFor="let group of listOfCarBrands" [label]="group.name">
              <mat-option *ngFor="let pokemon of group.carModels" [value]="pokemon">
                {{pokemon.name}}
              </mat-option>
            </mat-optgroup>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="text-right">
        <button mat-button class="default-btn" [disabled]="!keyForm.valid" (click)="updateKey()">Sačuvaj</button>
      </div>
    </div>
  </mat-tab>
  <mat-tab label="Informacije o ceni">
    <app-form-input [group]="keyPriceForm" [config]="priceInputConfig"></app-form-input>
    <div class="row" *ngFor="let keyPrice of listOfKeyPrices">
      <div class="col">
        <h6>Cena</h6>
        <h5>{{keyPrice.price}}</h5>
      </div>
      <div class="col">
        <h6 style="visibility: hidden">Opt</h6>
        <button mat-icon-button (click)="deleteKeyPrice(keyPrice.id)">
          <mat-icon>delete</mat-icon>
        </button>
      </div>
    </div>
  </mat-tab>
</mat-tab-group>

<mat-spinner #spinner diameter="25"></mat-spinner>
